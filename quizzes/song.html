<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Guess the Song</title>
  <link rel="stylesheet" href="../styles.css" />
</head>
<body data-require-profile="1">

  <div class="bg">
    <video class="bg__video" autoplay muted loop playsinline
      src="https://cdn.prod.website-files.com/67dd3f471f62a240dd544dd8%2F67dd41b5485dd4cf31eee3c0_Home_Beams-transcode.mp4"></video>
    <div class="bg__vignette"></div>
  </div>

  <header class="topbar">
    <a class="brand" href="../index.html" aria-label="MagicBlock home">
      <video class="brand__logo" autoplay muted loop playsinline src="../assets/logo.webm"></video>
    </a>

    <div class="topbar__right">
      <button id="profileSlot" class="profile" type="button" aria-label="Profile" style="display:none">
        <div class="profile__avatar">
          <img id="profileAvatarImg" alt="Avatar" />
          <div id="profileAvatarFallback" class="profile__fallback">MB</div>
        </div>
        <div id="profileName" class="profile__name"></div>
      </button>
    </div>
  </header>

  <main class="container">
    <h1 class="hero__title">Guess the Song by the Melody</h1>
    <p class="hero__subtitle">10 questions • A/B/C/D • Press Next after each answer.</p>

    <section class="card quizWrap" id="quizUI">
      <div class="qCounter" id="qCounter">Question 1 of 10</div>

      <!-- hidden real audio -->
      <audio id="audio" preload="metadata"></audio>

      <!-- custom player -->
      <div class="player">
        <div class="player__cover">
          <img id="cover" src="../assets/covers/placeholder.jpg" alt="Cover" />
        </div>

        <div class="player__main">
          <div class="player__top">
            <div class="player__title" id="trackTitle">Guess the song</div>
            <div class="player__time"><span id="cur">0:00</span> / <span id="dur">0:00</span></div>
          </div>

          <div class="player__controls">
            <button class="pbtn" id="playBtn" type="button">▶</button>
            <div class="bar" id="bar">
              <div class="bar__fill" id="fill"></div>
              <div class="bar__knob" id="knob"></div>
            </div>
            <input class="vol" id="vol" type="range" min="0" max="1" step="0.01" value="0.9" />
          </div>
        </div>
      </div>

      <div id="choices" class="quizWrap"></div>

      <div class="actions">
        <button id="next" class="btn btn--next" type="button" style="display:none">Next →</button>
      </div>

      <div class="small" id="status">Progress: 0 / 10</div>
      <div class="small" id="lockedMsg" style="display:none"></div>
    </section>

    <section class="resultCard" id="resultUI" style="display:none">
      <div class="resultHeader">
        <div class="resultProfile">
          <img id="resultAvatar" class="resultAvatar" alt="Avatar" />
          <div>
            <div id="resultName" class="resultName">Player</div>
            <div id="resultWhen" class="resultMeta"></div>
          </div>
        </div>
      </div>

      <table class="resultTable">
        <tr><th>Total</th><td id="rTotal">10</td></tr>
        <tr><th>Correct</th><td id="rCorrect">0</td></tr>
        <tr><th>Wrong</th><td id="rWrong">0</td></tr>
        <tr><th>Accuracy</th><td id="rPercent">0%</td></tr>
      </table>

      <div class="resultActions">
        <button id="genCard" class="btn btn--next" type="button">Generate Card</button>
        <a class="btn" href="../index.html">Back to Home</a>
      </div>
    </section>
  </main>

  <script src="../app.js" defer></script>
  <script src="./song.js" defer></script>
</body>
</html>
